# redux-middleware

ë§Œë“¤ë©´ì„œ ë°°ìš´ ì  ì •ë¦¬

https://ridicorp.com/story/how-to-use-redux-in-ridi/

## ğŸ“— ë¯¸ë“¤ì›¨ì–´ê°€ í•„ìš”í•œ ì´ìœ 

- reduxì—ì„œ actionì´ dispatchë˜ê³ , reducerê°€ ê°€ê³µí•œ stateë¥¼ ë°˜í™˜í•´ storeì— ë°˜í™˜ë˜ëŠ” ì´ ê³¼ì •ì€ ë™ê¸°ì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.
- ê·¸ë˜ì„œ ë§Œì•½ ì‹œê°„ì„ ì§€ì—°ì‹œí‚¤ê³  ì‹¶ê±°ë‚˜ API í†µì‹ ê°™ì€ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ì„ ë•Œ ì¤‘ê°„ì— ë¯¸ë“¤ì›¨ì–´ë¥¼ ë†“ëŠ”ë‹¤.
- ë¯¸ë“¤ì›¨ì–´ëŠ” API í†µì‹ ê°™ì€ ë¹„ë™ê¸° ì‘ì—…, ì‹œê°„ ì§€ì—° ì™¸ì—ë„ ë¡œê¹… ë“±ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## ğŸ“— ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ ì–‘ì‹

ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ëŠ” ì–‘ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```js
const middleware = (store) => (next) => (action) => {
  // ... ë¯¸ë“¤ì›¨ì–´ì—ì„œ í•  ì‘ì—…
};
```

í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ê³„ì† ì´ì–´ì§€ëŠ”ë° ì‚¬ì‹¤ ì•„ë˜ì²˜ëŸ¼ ê³„ì† í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” êµ¬ì¡°ì´ë‹¤.

```js
function middleware(store) {
  return function (next) {
    return function (action) {
      // ... ë¯¸ë“¤ì›¨ì–´ì—ì„œ í•  ì‘ì—…
    };
  };
}
```

## ğŸ“— ë¡œê¹…í•¨ìˆ˜ë¡œ ë¯¸ë“¤ì›¨ì–´ ì‘ì„±í•˜ëŠ” ë²• ì•Œì•„ë³´ê¸°

ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ëŠ” ì—¬ëŸ¬ê°œë¥¼ ì´ì–´ë¶™ì—¬ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì¸ìë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ ìˆì–´ì•¼ í•˜ëŠ”ë° ê·¸ ì—­í• ì„ `next()` í•¨ìˆ˜ê°€ í•œë‹¤.

`next(action)`ë¥¼ ë³´ë©´ `next()`ë¡œ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ actionë¥¼ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì „ë‹¬í•˜ê³  ìˆë‹¤.

```js
// myLogger.js
const myLogger = (store) => (next) => (action) => {
  console.log(action);
  console.log('\t', store.getState());

  const result = next(action);
  return result;
};
```

ë¯¸ë“¤ì›¨ì–´ ì ìš©ì€ `applyMiddleware()` í•¨ìˆ˜ë¡œ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë“¤ì„ ê°ì‹¸ë©´ ëœë‹¤. ë¯¸ë“¤ì›¨ì–´ê°€ ì—¬ëŸ¬ê°œë¼ë©´ `applyMiddleware()` ì•ˆì— íŒŒë¼ë¯¸í„°ë¡œ ë‹¤ ì „ë‹¬í•˜ë©´ ëœë‹¤.

```js
// index.js
const store = createStore(rootReducer, applyMiddleware(myLogger));
```
